= Arachne - Complete 2D Game Development Library for Kobweb

[![Maven Central](https://img.shields.io/maven-central/v/xyz.malefic/arachne)](https://central.sonatype.com/artifact/xyz.malefic/arachne)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

A comprehensive 2D game development library built on Kotlin/JS, designed to work seamlessly with the Kobweb framework. Arachne provides everything you need to build professional browser-based games with physics, particles, audio, networking, and more.

== âœ¨ Complete Feature Set

=== âœ… Phase 1 - Core Foundation
- **Entity Component System (ECS)**: Flexible entity management with components and systems
- **Game Loop**: Smooth frame timing with fixed and variable timestep
- **Math Library**: Vector2, Transform, Rectangle, AABB, and utilities
- **Input Management**: Keyboard, mouse, and touch input with state tracking
- **Asset Loading**: Image loading with progress tracking
- **Sprite Rendering**: Hardware-accelerated rendering with transforms
- **Camera System**: 2D camera with zoom, rotation, shake, and following
- **Scene Management**: Organize games into scenes with lifecycle hooks
- **Animation System**: Frame-based sprite sheet animations
- **Debug Tools**: FPS counter, entity count, grid overlay
- **Object Pooling**: Efficient object reuse for performance

=== âœ… Phase 2 - Game Mechanics
- **Physics Engine**: Complete 2D physics with RigidBody and colliders
- **Collision Detection**: Circle, Box, and Capsule colliders with layers
- **Collision Resolution**: Impulse-based physics response
- **Raycasting**: Line-of-sight and projectile mechanics
- **Particle System**: Advanced effects with multiple emission shapes
- **Audio Manager**: Sound effects and music with volume control
- **Touch Input**: Full multitouch support for mobile games
- **Tweening System**: 25+ easing functions for smooth animations
- **Enhanced Camera**: Shake effects for game feel
- **Enhanced Debug**: Collider and velocity visualization

=== âœ… Phase 3 - Polish & Tools
- **Tilemap System**: Grid-based levels with multiple layers
- **UI Components**: Health bars, progress bars, inventory system
- **Save/Load System**: Browser localStorage with serialization
- **A* Pathfinding**: Grid-based pathfinding with smoothing
- **Tileset Support**: Tile properties and collision

=== âœ… Phase 4 - Advanced Features
- **Network Manager**: WebSocket support for multiplayer
- **Visual Effects**: Grayscale, blur, vignette, noise, pixelate
- **Post-Processing**: Composable screen effects
- **Advanced Graphics**: Filter chains and custom effects

== ğŸ“¦ Installation

Add Arachne to your Kotlin/JS or Kobweb project:

=== Gradle (Kotlin DSL)

[source,kotlin]
----
dependencies {
    implementation("xyz.malefic:arachne:1.0.0")
}
----

=== Gradle (Groovy)

[source,groovy]
----
dependencies {
    implementation 'xyz.malefic:arachne:1.0.0'
}
----

== ğŸš€ Quick Start

[source,kotlin]
----
class MyGame : Game() {
    private val world = World()

    override fun create() {
        // Setup physics
        world.addSystem(PhysicsSystem(gravity = Vector2(0f, 980f)))
        world.addSystem(RenderSystem(ctx, camera))

        // Create player with physics using DSL
        world.addEntity {
            tag = "Player"
            transform(position = Vector2(400f, 300f))
            sprite(texture = "player.png", width = 32f, height = 32f)
            circleCollider(radius = 16f)
            rigidBody(mass = 1f)
        }
    }

    override fun update(deltaTime: Double) {
        super.update(deltaTime)
        world.update(deltaTime)
    }

    override fun render() {
        super.render()
        camera.applyTransform(ctx)
        // Rendering happens in RenderSystem
        camera.resetTransform(ctx)
    }
}

// In your Kobweb page:
@Composable
fun GamePage() {
    Box(Modifier.fillMaxSize()) {
        GameCanvas(
            width = 800,
            height = 600,
            gameFactory = { MyGame() }
        )
    }
}
----

== ğŸ® Feature Examples

=== Physics & Collision

[source,kotlin]
----
// Create physics entity using DSL
val entity = entity {
    tag = "PhysicsBox"
    transform(position = Vector2(100f, 100f))
    boxCollider(size = Vector2(32f, 32f))
    rigidBody(mass = 1f, useGravity = true)
}

// Apply forces
val rb = entity.get<RigidBody>()
rb?.addForce(Vector2(100f, 0f))
rb?.addImpulse(Vector2(0f, -300f)) // Jump

// Listen for collisions
physicsSystem.onCollisionEnter.add { collision ->
    println("Hit ${collision.entityB.tag}!")
    camera.shake(5f, 0.2f)
}

// Raycast
val hit = physicsSystem.raycast(
    origin = Vector2(0f, 0f),
    direction = Vector2(1f, 0f),
    maxDistance = 100f,
    entities = world.getEntities()
)
----

=== Particles

[source,kotlin]
----
// Add particle emitter to entity using DSL
entity {
    tag = "Explosion"
    transform(position = Vector2(400f, 300f))
    particleEmitter {
        emissionRate = 20f
        startColor = "#ff6b6b"
        endColor = "#ffd93d"
        velocity = Vector2(0f, -100f)
        gravity = Vector2(0f, 200f)
        emitterShape = EmitterShape.CIRCLE
    }
}

// Or add to existing entity
entity.add(ParticleEmitter(
    emissionRate = 20f,
    startColor = "#ff6b6b",
    endColor = "#ffd93d",
    velocity = Vector2(0f, -100f),
    gravity = Vector2(0f, 200f),
    emitterShape = EmitterShape.CIRCLE
))

// Control the emitter
val emitter = entity.get<ParticleEmitter>()
emitter?.play()
emitter?.burst() // Explosion effect
----

=== Audio

[source,kotlin]
----
// Sound effects
AudioManager.playSound("jump.mp3", volume = 0.5f, pitch = 1.2f)

// Music with fade
AudioManager.playMusic("bgm.mp3", volume = 0.7f, fadeIn = 2f)

// Volume control
AudioManager.masterVolume = 0.8f
AudioManager.muted = true
----

=== Tweening & Animation

[source,kotlin]
----
// Tween position
val tween = TweenBuilder.tweenVector2(
    getter = { transform.position },
    setter = { pos -> transform.position = pos },
    endValue = Vector2(500f, 300f),
    duration = 2f,
    easing = Easing::easeOutElastic
)
entity.add(tween)

// Sprite animation
val animator = Animator()
animator.addAnimation(Animation(
    name = "walk",
    frames = listOf(SpriteRect(0, 0, 32, 32), SpriteRect(32, 0, 32, 32)),
    frameDuration = 0.1f
))
animator.play("walk")
----

=== Tilemaps

[source,kotlin]
----
val tileset = Tileset("tiles.png", 32, 32, columns = 8, tileCount = 64)
val tilemap = Tilemap.createEmpty(
    width = 20,
    height = 15,
    tileWidth = 32,
    tileHeight = 32,
    tileset = tileset
)

// Set tiles
tilemap.setTileAt(5, 5, tileId = 1)

// Check collision
if (tilemap.isTileSolid(x, y)) {
    // Handle collision
}
----

=== Pathfinding

[source,kotlin]
----
val grid = PathfindingGrid(width = 20, height = 15)
grid.setWalkable(5, 5, false) // Obstacle

val pathfinder = AStarPathfinder(grid, allowDiagonal = true)
val path = pathfinder.findPath(0, 0, 19, 14)

// Smooth the path
val smoothed = pathfinder.smoothPath(path!!)
----

=== Networking

[source,kotlin]
----
val network = NetworkManager("ws://localhost:8080/game")

network.onConnect.add {
    println("Connected!")
    network.send("join", "player_name")
}

network.on("update") { message ->
    val data = NetworkHelper.parseMessage(message.data)
    // Handle game state update
}

network.connect()
----

=== Save/Load

[source,kotlin]
----
// Save game
val saveBuilder = SaveBuilder()
    .addPlayerData("health", 100)
    .addPlayerData("position", "400,300")
    .addWorldData("level", 5)
    .saveToSlot(1)

// Load game
val saveData = SaveSystem.loadFromSlot(1)
if (saveData != null) {
    val health = saveData.playerData["health"]?.toInt() ?: 100
}
----

=== Visual Effects

[source,kotlin]
----
// Apply post-processing
CanvasEffects.applyVignette(ctx, width, height, intensity = 0.5f)
CanvasEffects.applyNoise(ctx, width, height, intensity = 0.1f)

// Combine filters
CanvasEffects.combineFilters(ctx, listOf(
    "brightness(1.2)",
    "contrast(1.1)",
    "saturate(1.3)"
))
----

== ğŸ“Š Statistics

- **Total Files**: 44 Kotlin files
- **Lines of Code**: ~4,615 lines
- **Packages**: 15 fully-featured packages
- **Build Status**: âœ… Successful
- **Platforms**: Kotlin/JS (Browser)

== ğŸ¯ Capabilities

Build complete games with Arachne:

- âœ… **Platformers** - Physics, jumping, collision
- âœ… **Top-Down Games** - Movement, shooting, AI
- âœ… **Puzzle Games** - Grid-based, pathfinding
- âœ… **Physics Games** - Realistic simulation
- âœ… **Multiplayer Games** - WebSocket networking
- âœ… **Mobile Games** - Touch controls
- âœ… **Particle Effects** - Explosions, trails, magic
- âœ… **Smooth Animations** - Tweening, easing
- âœ… **Audio-Rich Experiences** - Music and SFX
- âœ… **Professional Polish** - Post-processing, effects

== ğŸ—ï¸ Architecture

Arachne uses an Entity Component System (ECS) architecture:

[source]
----
xyz.malefic.arachne/
â”œâ”€â”€ core/           # ECS, game loop, main game class
â”œâ”€â”€ math/           # Vector, transform, collision shapes
â”œâ”€â”€ physics/        # RigidBody, colliders, physics simulation
â”œâ”€â”€ graphics/       # Rendering, sprites, animations, camera, particles
â”œâ”€â”€ input/          # Keyboard, mouse, touch handling
â”œâ”€â”€ assets/         # Asset loading and management
â”œâ”€â”€ audio/          # Audio manager and sources
â”œâ”€â”€ scene/          # Scene management
â”œâ”€â”€ animation/      # Easing, tweening
â”œâ”€â”€ ai/             # Pathfinding
â”œâ”€â”€ network/        # Networking (WebSocket)
â”œâ”€â”€ ui/             # UI components
â”œâ”€â”€ debug/          # Debug tools and visualizations
â””â”€â”€ utils/          # Object pooling, save/load
----

== ğŸ”§ Advanced Features

- **Layer-Based Collision**: Selective collision filtering
- **Object Pooling**: Performance optimization
- **Spatial Audio**: Position-based sound (prepared)
- **Trigger Zones**: Non-physical collision detection
- **Camera Shake**: Dynamic screen shake
- **Debug Visualization**: Colliders, velocity, grid
- **Line-of-Sight**: Raycasting utilities
- **Path Smoothing**: Optimized pathfinding
- **Effect Chains**: Combine multiple visual effects

== ğŸ“ Learning Resources

**Example Games**:
- `library/src/jsMain/kotlin/xyz/malefic/arachne/examples/PhysicsDemo.kt` - Complete physics demonstration

== ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch
3. Commit your changes
4. Push to the branch
5. Open a Pull Request

== ğŸ“„ License

This project is licensed under the MIT License - see the link:LICENSE[LICENSE] file for details.

== ğŸ‘ Acknowledgments

- Built with https://kotlinlang.org/docs/js-overview.html[Kotlin/JS]
- Designed for https://github.com/varabyte/kobweb[Kobweb]
- Inspired by Unity, LibGDX, and Phaser

== ğŸ“§ Contact

Om Gupta - https://github.com/OmyDaGreat[@OmyDaGreat] - ogupta4242@gmail.com

'''

**Made with â¤ï¸ for the Kobweb community**
